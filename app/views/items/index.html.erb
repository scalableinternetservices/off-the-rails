<h1>Items</h1>

<h2><%= link_to "Create New Listing", new_item_path %></h2>

<div id='separator'></div> 

<!-- Price Filter Form -->
<%= form_with url: items_path, method: :get, local: true do |form| %>
  <div>
    <%= form.label :min_price, "Minimum Price" %>
    <%= form.number_field :min_price, value: params[:min_price], step: 0.01 %>
  </div>
  <div>
    <%= form.label :max_price, "Maximum Price" %>
    <%= form.number_field :max_price, value: params[:max_price], step: 0.01 %>
  </div>
  <%= form.submit "Filter" %>
<% end %>

<div id='separator'></div>

<div class="center-display">
  <div class="items-grid">
    <% @items.each do |item| %>
      <div class="item-card">
        <h3><%= link_to item.name, item %></h3>
        <p><strong>Description:</strong> <%= item.description %></p>
        <p><strong>Price:</strong> $<%= item.price %></p>
        <p><strong>Condition:</strong> <%= item.condition %></p>
        <p><strong>Seller:</strong> <%= item.user.name %></p>
        
        <% if current_cart.items.include?(item) %>
          <p><strong>Already in Cart</strong></p>
        <% elsif item.user_id == current_user.id %>
          <p><strong>This is your item</strong></p>
        <% else %>
          <%= button_to 'Add to Cart', cart_add_item_path(cart_id: current_cart.id, item_id: item.id), method: :post %>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
